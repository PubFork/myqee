<?php
if (false)$method = new _Docs_Method();
$declares = $method->method->getDeclaringClass();
?>
<blockquote>
<div class="api-method-name-div">
<?php
    echo $method->modifiers . $method->method->name .'('. ($method->params?$method->params_short():''). ')';
?>
    <br/><ul class="ul"><li><small>└ <?php echo $declares->name; ?></small></li></ul>
</div>
</blockquote>
<div class="api-description">
<?php echo Markdown::defaultTransform(implode("\n", $method->description)); ?>
</div>




<?php if ($method->tags): ?>
<dl class="tags">
<?php foreach ($tags as $name => $set): ?>
<span>
<dt><?php echo $name ?></dt>
<?php foreach ($set as $tag): ?>
<dd><?php echo $tag ?></dd>
<?php endforeach ?>
</span>
<?php endforeach ?>
</dl>
<?php endif ?>




<?php if ($method->params): ?>
<h5><?php echo __('Parameters'); ?></h5>
<table>
<tr>
    <th><?php echo __('Parameter'); ?></th>
    <th><?php echo __('Type'); ?></th>
    <th><?php echo __('Description'); ?></th>
    <th><?php echo __('Default'); ?></th>
</tr>
<?php foreach ($method->params as $param): ?>
<tr>
<td><strong><code><?php echo '$'.$param->name ?></code></strong></td>
<td><code><?php echo $param->byref?'byref ':''.$param->type?$param->type:'unknown' ?></code></td>
<td><?php echo preg_match('#^[a-z]#', $param->description)?ucfirst($param->description):$param->description; ?></td>
<td><?php echo $param->default ?></td>
</tr>
<?php endforeach; ?>
</table>
<?php endif ?>


<?php if ($method->return): ?>
<h5><?php echo __('Return Values'); ?></h5>
<ul class="return">
<?php foreach ($method->return as $set): list($type, $text) = $set; ?>
<li><code><?php echo HTML::chars($type) ?></code> <?php echo HTML::chars($text) ?></li>
<?php endforeach ?>
</ul>
<?php endif ?>


<div class="api-filename-div" data-placement="left" data-original-title="点击展开" data-toggle="tooltip"><span style="padding-top:1px;float:right;"><i class="icon-plus"></i></span>File: <?php echo Core::debug_path($method->class->getFilename());?></div>
<div class="api-filecode-div" style="display:none;"><pre><code class="first-line: <?php echo $method->getStartLine();?>"><?php echo htmlspecialchars($method->source, ENT_QUOTES, 'utf-8', true) ?></code></pre></div>
<script type="text/javascript">
$('.api-filename-div').click(function(){
    var obj = $(this).nextAll('.api-filecode-div');
    if (obj.css('display')=='none')
    {
        obj.fadeIn();
        $(this).attr('data-original-title', '点击关闭').find('i').removeClass('icon-plus').addClass('icon-minus');
    }
    else
    {
        obj.fadeOut();
        $(this).attr('data-original-title', '点击展开').find('i').removeClass('icon-minus').addClass('icon-plus');
    }
});

$('.api-filename-div').tooltip();
</script>